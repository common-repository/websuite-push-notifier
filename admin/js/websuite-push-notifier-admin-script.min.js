!function(t){"use strict";jQuery(document).ready((function(){function t(t,e){let i={action:"clear"};i.content={value:t,type:e},jQuery.post(wspnOptionsObject.ajax_url,{action:"wspn_admin",security:wspnOptionsObject._nonce,data:i},(function(t){t.success?iziToast.success({title:"Success",message:"Logs cleared.",position:"topRight"}):iziToast.error({title:"Error",message:"Unable to clear logs.",position:"topRight"})}))}function e(t,e){let i='<div class="listFieldItem"><input type="text" name="'+e+'[]" value="" class="listField" id="'+e+'"><button type="button" class="removeListField btn is-small is-icon is-destructive"><span class="dashicons dashicons-post-trash"></span></button></div>';jQuery(t).append(i)}jQuery(".websuite-push-notifier").length&&(jQuery(".websuite-push-notifier .tip-tool").tooltip({backgroundColor:"#feb701",textColor:"#fff"}),jQuery(".websuite-push-notifier .minicolors").minicolors({keywords:"transparent, initial, inherit",letterCase:"uppercase",changeDelay:500}),jQuery(".websuite-push-notifier .display-next").each((function(){let t=jQuery(this),e=t.parent().parent().next();t.is(":checked")?(e.show(),e.removeClass("hidden-wspn")):(e.hide(),e.addClass("hidden-wspn")),t.on("click",(function(){jQuery(this).parent().parent().toggleClass("no-margin-bottom"),t.is(":checked")?(e.show(),e.removeClass("hidden-wspn")):(e.hide(),e.addClass("hidden-wspn"))}))})),jQuery('.websuite-push-notifier [class*="slider-pt-"]').each((function(){let t=jQuery(this);t.empty().slider({orientation:"horizontal",range:"max",step:t.prev().data("step"),min:t.prev().data("min"),max:t.prev().data("max"),value:t.prev().data("default"),animate:!0,slide:function(e,i){t.prev().val(i.value)}}),t.prev().val(t.slider("value"))})),jQuery('.websuite-push-notifier [class*="sortable-afz-"]').each((function(){let t=jQuery(this);jQuery(this).sortable({connectWith:".list_sort",placeholder:"sortable-placeholder",update:function(e,i){t.next().val(t.sortable("toArray").toString())}}).disableSelection()})),jQuery('.websuite-push-notifier [class*="sortable-pt-"]').each((function(){let t=jQuery(this),e=[];jQuery(this).sortable({connectWith:".list_sort",placeholder:"sortable-placeholder",update:function(i,n){t.next().val(""),e=[],jQuery(this).find("li").each((function(){let t=jQuery(this).children().first().data();e[jQuery(this).index()]={data:t}})),t.next().val(JSON.stringify(e))}}).disableSelection()})),jQuery(document).on("click",".websuite-push-notifier .add-item",(function(){let t=jQuery(this),e=jQuery(".list_items_active"),i=jQuery(".list_items_active li").length,n={},s=[];if(jQuery(t.parent().parent().find("input")).each((function(){let t=jQuery(this),e=jQuery(this).val(),i=t.attr("id"),s=t.attr("type");return t.removeClass("is-success"),!t.hasClass("validate")||e&&""!==e||"checkbox"===s?(t.removeClass("is-error"),n[i]=e,"checkbox"===s&&(n[i]=!!t.is(":checked")),t.val(""),t.addClass("is-success"),!0):(t.addClass("is-error"),t.focus(),!1)})),!1!==jQuery.isEmptyObject(n))return!1;{let t="",a="",o=n.name;jQuery.each(n,(function(e,i){t+="data-"+e+'="'+i+'" ',e=e.substring(0,1).toUpperCase()+e.substring(1),a+='<span class="link-in-list" style="display: block;">'+e+" : "+i+"</span>"})),o=o.substring(0,1).toUpperCase()+o.substring(1),e.append('<li id="'+i+'" data-id="'+i+'"><span class="data-catch" '+t+"></span>"+o+" "+a+'<span class="is-right remove-item dashicons dashicons-no-alt is-error"></span></li>'),e.next().val(""),e.each((function(){jQuery(this).find("li").each((function(){let t=jQuery(this).children().first().data();s[jQuery(this).index()]={data:t}}))})),e.next().val(JSON.stringify(s))}})),jQuery(document).on("click",".websuite-push-notifier .remove-item",(function(){jQuery(this).parent().remove();let t=jQuery(".list_items_active"),e=[];t.each((function(){jQuery(this).find("li").each((function(){let t=jQuery(this).children().first().data();e[t.id]={data:t}}))}));let i=e.filter((function(t){return null!=t}));t.next().val(JSON.stringify(i))})),jQuery(document).on("click",".websuite-push-notifier .notice-dismiss",(function(){let t={};t.action=jQuery(this).parent().data("action"),jQuery.post(wspnOptionsObject.ajax_url,{action:"notice_wspn_options_check",security:wspnOptionsObject._nonce,data:t})})),jQuery(document).on("touchstart click",".websuite-push-notifier .accordion-init",(function(){let t=!1,e=jQuery(".accordion-content");if(!t){t=!0;let i=jQuery(this).attr("data-tab");jQuery(".tabs, .tab-content").removeClass("active"),jQuery("#"+i).addClass("active"),jQuery(this).next().find("a").eq(0).addClass("active");let n=jQuery(this).index(".accordion-init"),s=jQuery(".accordion-content-inner").eq(n).outerHeight();jQuery(".accordion-init").removeClass("active"),jQuery(this).addClass("active"),e.stop().animate({height:0},300),e.eq(n).stop().animate({height:s},300),setTimeout((function(){t=!1}),300)}})),jQuery(document).on("click",".websuite-push-notifier .tabs",(function(){let t=jQuery(this).attr("data-tab");jQuery(".tabs, .tab-content").removeClass("active"),jQuery(this).addClass("active"),jQuery("#"+t).addClass("active"),jQuery('[data-tab="settings-tab-2"]').hasClass("active")?jQuery(".options-admin-save").hide():jQuery(".options-admin-save").show()})),jQuery(document).on("click",".websuite-push-notifier .upload_image_button",(function(){let t=wp.media.editor.send.attachment,e=jQuery(this);return wp.media.editor.send.attachment=function(i,n){jQuery(e).parent().prev().find("img").attr("src",n.url),jQuery(e).prev().val(n.id),wp.media.editor.send.attachment=t},wp.media.editor.open(e),!1})),jQuery(document).on("click",".websuite-push-notifier .remove_image_button",(function(){let t=jQuery(this);return dialog.confirm({title:"Remove this logo?",message:"This will reset the image to the default one. Are you sure you want to continue?",cancel:"Cancel",button:"Accept",required:!0,callback:function(e){if(!0===e){let e=t.parent().prev().find("img").attr("data-src");t.parent().prev().find("img").attr("src",e),t.prev().prev().val("")}}}),!1})),jQuery(document).on("click",".websuite-push-notifier .card-header",(function(){jQuery(this).toggleClass("tab-toggled"),jQuery(this).next().slideToggle()})),jQuery(document).on("submit",".websuite-push-notifier .plugin-options-form",(function(t){t.preventDefault();let e={action:"save"};e.content=jQuery(".websuite-push-notifier .plugin-options-form").serialize(),jQuery.post(wspnOptionsObject.ajax_url,{action:"wspn_admin",security:wspnOptionsObject._nonce,data:e},(function(t){t.success?iziToast.success({title:"Saved",message:"Successfully saved settings.",position:"topRight",buttons:[["<button>Refresh the page?</button>",function(){location.reload()},!0]]}):iziToast.warning({title:"No Changes?",message:"No settings have changed!",position:"topRight"})}))}))),jQuery(document).on("click",".wspn_send_notification",(function(t){t.preventDefault();let e,i,n=jQuery(this).attr("data-location"),s={};"main"===n?(i=jQuery("#notifier_post").val(),e=jQuery("#notifier_message_image").val()):"posts"===n?i=jQuery(this).attr("data-post-id"):"single_post"===n&&(i=jQuery(this).attr("data-post-id"),e=jQuery("#notifier_message_image").is(":checked")),s.action="send",s.content={location:n,title:jQuery("#notifier_message_title").val(),body:jQuery("#notifier_message_body").val(),image:e,post:i};let a=jQuery("#notifier_fcm_topic").val();void 0!==a&&(s.content.topic=a),jQuery.post(wspnOptionsObject.ajax_url,{action:"wspn_admin",security:wspnOptionsObject._nonce,data:s},(function(t){t.success?iziToast.success({title:"Success",message:"Your push notification has been sent.",position:"topRight"}):iziToast.error({title:"Error",message:"Your push notification was not sent. Please check your AWS config and logs.",position:"topRight"})}))})),jQuery(document).on("click",".wspn_clear_number",(function(e){e.preventDefault(),iziToast.info({drag:!1,close:!1,overlay:!0,title:"Only keep the latest __ logs.",position:"center",inputs:[['<input type="number">',"keyup",function(t,e,i,n){},!0]],buttons:[["<button><b>DELETE</b></button>",function(e,i,n,s,a){t(a[0].value,"number"),e.hide({transitionOut:"fadeOut"},i,"button")},!1],["<button><b>CANCEL</b></button>",function(t,e,i,n,s){t.hide({transitionOut:"fadeOut"},e,"button")},!1]]})})),jQuery(document).on("click",".wspn_clear_days",(function(e){e.preventDefault(),iziToast.info({drag:!1,close:!1,overlay:!0,title:"Clear logs older than __ days.",position:"center",inputs:[['<input type="number">',"keyup",function(t,e,i,n){},!0]],buttons:[["<button><b>DELETE</b></button>",function(e,i,n,s,a){t(a[0].value,"days"),e.hide({transitionOut:"fadeOut"},i,"button")},!1],["<button><b>CANCEL</b></button>",function(t,e,i,n,s){t.hide({transitionOut:"fadeOut"},e,"button")},!1]]})})),jQuery(document).on("click",".removeListField",(function(t){1===jQuery(this).parent().parent().children().length&&e(jQuery(this).parent().parent(),jQuery(this).parent().parent().siblings("label").attr("id")),jQuery(this).parent().remove()})),jQuery(document).on("click",".addListField",(function(t){e(jQuery(this).siblings(".listFieldContainer"),jQuery(this).siblings("label").attr("id"))}))}))}(jQuery);